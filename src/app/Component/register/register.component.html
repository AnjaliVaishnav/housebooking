<app-header></app-header>
<body>
    <div class="container">
        <div class="row justify-content-center bravo-login-form-page bravo-login-page">
            <div class="col-md-5">
                <div class="">
                    <form class="form bravo-form-register" 
                    method="post" 
                    action="http://imginfotech.in/propira/api/registration"
                    [formGroup]="registerForm" 
                    *ngIf ="isShown"
                    novalidate (ngSubmit)="submitForm()">
                    <h4 class="form-title">Register</h4>
                        <input type="hidden" name="_token" value="BKwZDIG2QxDPQMqih3ne0dxWY1ewUG1PPWFVklqX"> 
                        <div class="row">
                            <div class="col-lg-6 col-md-12">
                                <div class="form-group">
                                    <input type="fname" class="form-control" name="first_name" autocomplete="off" placeholder="First Name" 
                                    formControlName="fname"
                                    [(ngModel)]="person.name">
                                    <i class="input-icon field-icon fa">
                                    <!-- <img src="images/ico_fullname_signup.svg"> -->
                                    </i>
                                    <div class="alert alert-danger" *ngIf="isValidInput('fname')">
                                        <div *ngIf="registerForm.controls['fname'].errors?.required">
                                            First Name is required.
                                        </div>
                                        <div *ngIf="registerForm.controls['fname'].errors?.minlength">
                                            At least 3 charcter is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="form-group">
                                    <input type="lname" class="form-control" name="last_name" autocomplete="off" placeholder="Last Name" formControlName="lname">
                                    <i class="input-icon field-icon fa">
                                    <!-- <img src="images/ico_fullname_signup.svg"> -->
                                    </i>
                                    <div class="alert alert-danger" *ngIf="isValidInput('lname')">
                                        <div *ngIf="registerForm.controls['lname'].errors?.required">
                                            Last Name is required.
                                        </div>
                                        <div *ngIf="registerForm.controls['lname'].errors?.minlength">
                                            At least 3 charcter is required.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="email" class="form-control" name="email" autocomplete="off" placeholder="Email address" 
                            formControlName="email"
                            [(ngModel)]="person.email"> 
                            <i class="input-icon field-icon fa">
                            <!-- <img src="images/ico_email_login_form.svg"> -->
                            </i>
                            <div class="alert alert-danger" *ngIf="isValidInput('email')">
                                <div *ngIf="registerForm.controls['email'].errors?.required">
                                    Email is required.
                                </div>
                                <div *ngIf="registerForm.controls['email'].errors?.pattern">
                                    Invalid format.
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="mobile" class="form-control" name="mobile" autocomplete="off" placeholder="Mobile number" 
                            formControlName="mobile"
                            [(ngModel)]="person.mobile"
                            #mobile>
                            <i class="input-icon field-icon fa">
                            <!-- <img src="images/ico_email_login_form.svg"> -->
                            </i>
                            <div class="alert alert-danger" *ngIf="isValidInput('mobile')">
                                <div *ngIf="registerForm.controls['mobile'].errors?.required">
                                    Mobile number is required.
                                </div>
                        
                                <div *ngIf="registerForm.controls['mobile'].errors?.pattern">
                                    Letters are not allowed.
                                </div>
                                <div *ngIf="registerForm.controls['mobile'].errors?.minlength">
                                    Must contain 10 digits.
                                </div>
                                <div *ngIf="registerForm.controls['mobile'].errors?.maxlength">
                                    Must Contain 10 digits.
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" name="password" autocomplete="off" placeholder="Password" 
                            formControlName="password"
                            [(ngModel)]="person.password">
                            <i class="input-icon field-icon fa">
                            <!-- <img src="images/ico_pass_login_form.svg"> -->
                            </i>
                            <div class="alert alert-danger" *ngIf="isValidInput('password')">
                                <div *ngIf="registerForm.controls['password'].errors?.required">
                                    Password is required.
                                </div>
                                <div *ngIf="registerForm.controls['password'].errors?.minlength">
                                    Minimum 6 characters are required.
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="term">
                            <input id="term" type="checkbox" name="term" class="mr5" formControlName="checkbox">
                                I have read and accept the 
                                <a href='#' target='_blank'>Terms and Privacy Policy</a>
                                <span class="checkmark fcheckbox"></span>
                            </label>
                            <div class="alert alert-danger" *ngIf="isValidInput('checkbox')">
                                <div *ngIf="registerForm.controls['checkbox'].errors?.required">
                                    Plaese Check.
                                </div>
                            </div>
                        </div>
                        <div class="error message-error invalid-feedback"></div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary form-submit" (click)="addData()" [disabled]="!registerForm.valid">
                                Sign Up
                                <span class="spinner-grow spinner-grow-sm icon-loading" role="status" aria-hidden="true"></span>
                            </button>
                        </div>
                        <div class="c-grey f14 text-center">
                            Already have an account?
                            <a href="#" data-target="#login" data-toggle="modal">Log In</a>
                        </div>
                    </form>
                    <form action=""  method="POST" novalidate *ngIf="show" #otpVerify>
                        <div id="wrapper" class="col-md-12">
                            <div id="dialog">
                              <h4 class="text-center"><b>Verify</b></h4>
                              <label class="text-center">OTP has been sent to your mobile {{person.mobile}}, please enter same here to verify.</label>
                              <div class="row" style="margin-left: 50px;">
                                <div class="form-group">
                                    <input type="text" 
                                    class="form-control"
                                    formContorlName="otp"
                                    maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)" />
                                   </div>
                                   <div class="form-group">
                                    <input type="text"
                                    class="form-control"
                                    formContorlName="otp1" maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)" />
                                   </div>
                                   <div class="form-group">
                                    <input type="text" 
                                    class="form-control"
                                    formContorlName="otp2"maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)"/>
                                   </div>
                                   <div class="form-group">
                                    <input type="text" 
                                    class="form-control"
                                    formContorlName="otp3"maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)"/>
                                   </div>
                                   <div class="form-group">
                                    <input type="text" 
                                    class="form-control"
                                    formContorlName="otp4"maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)"/>
                                   </div>
                                   <div class="form-group">
                                    <input type="text"
                                    class="form-control"
                                    formContorlName="otp5" maxLength="1" size="1" min="0" max="9" pattern="[0-9]{1}" (keyup)="onKey($event)" (ngModelChange)="onChange($event)"/>
                                   </div>
                                </div>
                                <div class="row" style="margin-left: 170px;">
                                    <div class="form-group">
                                        <button class="btn btn-primary btn-embossed" (click)="onClick(otpVerify.value)">Verify</button>
                                    </div>
                                </div>
                                <p>You entered: - {{values}}  </p>
                                <div>
                                     Didn't receive the code?<br/>
                                    <a href="#">Send code again</a><br />
                                </div>
                            </div>  
                        </div>
                    </form>   
                </div>
            </div>
        </div>    
    </div>
    <script>
    $(function() {
        'use strict';
        var body = $('body');
      
        function goToNextInput(e) {
          var key = e.which,
            t = $(e.target),
            sib = t.next('input');
      
          if (key != 9 && (key < 48 || key > 57)) {
            e.preventDefault();
            return false;
          }
      
          if (key === 9) {
            return true;
          }
      
          if (!sib || !sib.length) {
            sib = body.find('input').eq(0);
          }
          sib.select().focus();
        }
      
        function onKeyDown(e) {
          var key = e.which;
      
          if (key === 9 || (key >= 48 && key <= 57)) {
            return true;
          }
      
          e.preventDefault();
          return false;
        }
        
        function onFocus(e) {
          $(e.target).select();
        }
      
        body.on('keyup', 'input', goToNextInput);
        body.on('keydown', 'input', onKeyDown);
        body.on('click', 'input', onFocus);
      
      })
      </script>
    </body>   
<app-footer></app-footer>